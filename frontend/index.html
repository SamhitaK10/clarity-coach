<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clarity Coach - Complete Communication Analysis</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üéØ Clarity Coach</h1>
            <p class="subtitle">Complete Communication Analysis</p>
            <p class="description">
                Upload one video and get comprehensive feedback on BOTH nonverbal and verbal communication
            </p>
        </header>

        <main>
            <!-- Upload Section -->
            <section id="upload-section" class="card">
                <h2>Upload Your Video</h2>
                <p class="instruction">
                    Upload a 30-90 second video of yourself presenting or answering an interview question.
                    You'll receive analysis on eye contact, posture, gestures, speech clarity, grammar, and more!
                </p>

                <div class="upload-area" id="upload-area">
                    <svg class="upload-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                    </svg>
                    <p class="upload-text">
                        <strong>Click to upload</strong> or drag and drop
                    </p>
                    <p class="upload-hint">MP4, MOV, WEBM (max 50MB, 90s)</p>
                    <input type="file" id="video-input" accept="video/mp4,video/mov,video/webm,video/quicktime" hidden>
                </div>

                <div id="file-info" class="file-info hidden">
                    <p><strong>Selected:</strong> <span id="file-name"></span></p>
                    <p><strong>Size:</strong> <span id="file-size"></span></p>
                    <button id="analyze-btn" class="btn btn-primary">Analyze Video</button>
                </div>
            </section>

            <!-- Loading Section -->
            <section id="loading-section" class="card hidden">
                <div class="loading-spinner"></div>
                <h3>Analyzing Your Communication...</h3>
                <p class="loading-text">
                    Processing video and audio... This typically takes 40-90 seconds.
                </p>
                <div class="progress-steps">
                    <div class="step active">
                        <div class="step-circle">1</div>
                        <div class="step-label">Processing Video</div>
                    </div>
                    <div class="step">
                        <div class="step-circle">2</div>
                        <div class="step-label">Analyzing Speech</div>
                    </div>
                    <div class="step">
                        <div class="step-circle">3</div>
                        <div class="step-label">Generating Feedback</div>
                    </div>
                </div>
            </section>

            <!-- Results Section -->
            <section id="results-section" class="card hidden">
                <h2>Your Complete Communication Analysis</h2>

                <!-- Nonverbal Metrics -->
                <div class="section-title">üìä Nonverbal Communication</div>
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-header">
                            <span class="metric-icon">üëÅÔ∏è</span>
                            <span class="metric-label">Eye Contact</span>
                        </div>
                        <div class="metric-value" id="eye-contact-value">--</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="eye-contact-bar"></div>
                        </div>
                    </div>

                    <div class="metric-card">
                        <div class="metric-header">
                            <span class="metric-icon">üßç</span>
                            <span class="metric-label">Posture</span>
                        </div>
                        <div class="metric-value" id="posture-value">--</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="posture-bar"></div>
                        </div>
                    </div>

                    <div class="metric-card">
                        <div class="metric-header">
                            <span class="metric-icon">üëã</span>
                            <span class="metric-label">Gestures</span>
                        </div>
                        <div class="metric-value" id="gesture-value">--</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="gesture-bar"></div>
                        </div>
                    </div>

                    <div class="metric-card">
                        <div class="metric-header">
                            <span class="metric-icon">üòä</span>
                            <span class="metric-label">Warmth/Smile</span>
                        </div>
                        <div class="metric-value" id="smile-value">--</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="smile-bar"></div>
                        </div>
                    </div>

                    <div class="metric-card">
                        <div class="metric-header">
                            <span class="metric-icon">üéØ</span>
                            <span class="metric-label">Head Stability</span>
                        </div>
                        <div class="metric-value" id="head-stability-value">--</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="head-stability-bar"></div>
                        </div>
                    </div>

                    <div class="metric-card">
                        <div class="metric-header">
                            <span class="metric-icon">‚ú®</span>
                            <span class="metric-label">Gesture Variety</span>
                        </div>
                        <div class="metric-value" id="gesture-variety-value">--</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="gesture-variety-bar"></div>
                        </div>
                    </div>
                </div>

                <!-- Verbal Analysis -->
                <div id="verbal-section" class="verbal-section">
                    <div class="section-title">üó£Ô∏è Verbal Communication</div>

                    <!-- Transcript -->
                    <div class="transcript-box">
                        <h3>Your Speech</h3>
                        <div id="transcript-content" class="transcript-content"></div>
                    </div>

                    <!-- Verbal Feedback -->
                    <div class="feedback-grid">
                        <div class="feedback-card">
                            <div class="feedback-header">
                                <span class="feedback-icon">üí°</span>
                                <span class="feedback-label">Clarity</span>
                            </div>
                            <p id="clarity-feedback" class="feedback-text"></p>
                        </div>

                        <div class="feedback-card">
                            <div class="feedback-header">
                                <span class="feedback-icon">‚úçÔ∏è</span>
                                <span class="feedback-label">Grammar</span>
                            </div>
                            <p id="grammar-feedback" class="feedback-text"></p>
                        </div>

                        <div class="feedback-card">
                            <div class="feedback-header">
                                <span class="feedback-icon">üó£Ô∏è</span>
                                <span class="feedback-label">Phrasing</span>
                            </div>
                            <p id="phrasing-feedback" class="feedback-text"></p>
                        </div>

                        <div class="feedback-card">
                            <div class="feedback-header">
                                <span class="feedback-icon">‚ö†Ô∏è</span>
                                <span class="feedback-label">Filler Words</span>
                            </div>
                            <p id="filler-feedback" class="feedback-text"></p>
                        </div>
                    </div>

                    <!-- Example Sentence -->
                    <div class="example-box">
                        <h3>‚ú® Improved Example</h3>
                        <div id="example-sentence" class="example-content"></div>
                    </div>
                </div>

                <!-- Combined Coaching Feedback -->
                <div class="coaching-section">
                    <h3>üí¨ Your Personal Coach Says:</h3>
                    <div id="combined-feedback" class="coaching-content"></div>
                </div>

                <!-- Voice Coaching (if available) -->
                <div id="voice-section" class="voice-section hidden">
                    <h3>üîä Listen to Your Coach</h3>
                    <p class="voice-description">Hear your personalized coaching feedback:</p>
                    <audio id="voice-player" controls></audio>
                </div>

                <button id="analyze-another-btn" class="btn btn-secondary">Analyze Another Video</button>
            </section>

            <!-- Error Section -->
            <section id="error-section" class="card error-card hidden">
                <h3>‚ö†Ô∏è Analysis Failed</h3>
                <p id="error-message" class="error-text"></p>
                <button id="try-again-btn" class="btn btn-secondary">Try Again</button>
            </section>
        </main>

        <footer>
            <p>Powered by MediaPipe, Whisper, Claude, OpenAI & ElevenLabs ‚Ä¢ <a href="/health" target="_blank">API Status</a></p>
        </footer>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
