<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interview Coaching - Clarity Coach</title>
    <link rel="stylesheet" href="/static/interview-style.css">
</head>
<body>
    <div class="container">
        <header>
            <a href="/" class="back-link">‚Üê Back to Home</a>
            <h1>üé§ Interview Coaching</h1>
            <p class="subtitle">AI-Powered Speech Analysis & Feedback</p>
        </header>

        <main>
            <!-- Record/Upload Section -->
            <section id="input-section" class="card">
                <h2>Practice Your Answer</h2>
                <p class="instruction">
                    Record or upload your interview answer (30-90 seconds) for AI coaching feedback.
                </p>

                <!-- Recording Controls -->
                <div class="recording-area">
                    <button id="record-btn" class="btn btn-record">
                        <span class="record-icon">üéôÔ∏è</span>
                        <span class="record-text">Start Recording</span>
                    </button>
                    <div id="recording-timer" class="recording-timer hidden">
                        <span class="pulse-dot"></span>
                        <span id="timer-text">0:00</span>
                    </div>
                </div>

                <div class="divider">
                    <span>OR</span>
                </div>

                <!-- File Upload -->
                <div class="upload-area" id="upload-area">
                    <svg class="upload-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                    </svg>
                    <p class="upload-text">
                        <strong>Click to upload</strong> or drag and drop
                    </p>
                    <p class="upload-hint">MP3, WAV, WEBM, M4A (max 10MB)</p>
                    <input type="file" id="audio-input" accept="audio/*" hidden>
                </div>

                <div id="file-info" class="file-info hidden">
                    <p><strong>Selected:</strong> <span id="file-name"></span></p>
                    <p><strong>Size:</strong> <span id="file-size"></span></p>
                    <button id="analyze-btn" class="btn btn-primary">Get Feedback</button>
                </div>
            </section>

            <!-- Loading Section -->
            <section id="loading-section" class="card hidden">
                <div class="loading-spinner"></div>
                <h3>Analyzing Your Answer...</h3>
                <p class="loading-text">
                    Transcribing audio and generating coaching feedback... This typically takes 10-30 seconds.
                </p>
                <div class="progress-steps">
                    <div class="step active">
                        <div class="step-circle">1</div>
                        <div class="step-label">Transcribing</div>
                    </div>
                    <div class="step">
                        <div class="step-circle">2</div>
                        <div class="step-label">Analyzing</div>
                    </div>
                    <div class="step">
                        <div class="step-circle">3</div>
                        <div class="step-label">Generating Feedback</div>
                    </div>
                </div>
            </section>

            <!-- Results Section -->
            <section id="results-section" class="card hidden">
                <h2>Your Coaching Feedback</h2>

                <!-- Transcript -->
                <div class="transcript-section">
                    <h3>üìù Your Answer</h3>
                    <div id="transcript-content" class="transcript-content"></div>
                </div>

                <!-- Feedback Cards -->
                <div class="feedback-grid">
                    <!-- Clarity -->
                    <div class="feedback-card">
                        <div class="feedback-header">
                            <span class="feedback-icon">üí°</span>
                            <span class="feedback-label">Clarity</span>
                        </div>
                        <p id="clarity-feedback" class="feedback-text"></p>
                    </div>

                    <!-- Grammar -->
                    <div class="feedback-card">
                        <div class="feedback-header">
                            <span class="feedback-icon">‚úçÔ∏è</span>
                            <span class="feedback-label">Grammar</span>
                        </div>
                        <p id="grammar-feedback" class="feedback-text"></p>
                    </div>

                    <!-- Phrasing -->
                    <div class="feedback-card">
                        <div class="feedback-header">
                            <span class="feedback-icon">üó£Ô∏è</span>
                            <span class="feedback-label">Phrasing</span>
                        </div>
                        <p id="phrasing-feedback" class="feedback-text"></p>
                    </div>

                    <!-- Filler Words -->
                    <div class="feedback-card">
                        <div class="feedback-header">
                            <span class="feedback-icon">‚ö†Ô∏è</span>
                            <span class="feedback-label">Filler Words</span>
                        </div>
                        <p id="filler-feedback" class="feedback-text"></p>
                    </div>
                </div>

                <!-- Example Sentence -->
                <div class="example-section">
                    <h3>‚ú® Improved Example</h3>
                    <div id="example-sentence" class="example-content"></div>
                </div>

                <!-- Voice Feedback (if available) -->
                <div id="voice-section" class="voice-section hidden">
                    <h3>üîä Voice Coaching</h3>
                    <audio id="voice-player" controls></audio>
                </div>

                <!-- Follow-up -->
                <div class="followup-section">
                    <h3>üí¨ Coach's Question</h3>
                    <p id="followup-question" class="followup-text"></p>
                </div>

                <button id="practice-again-btn" class="btn btn-secondary">Practice Again</button>
            </section>

            <!-- Error Section -->
            <section id="error-section" class="card error-card hidden">
                <h3>‚ö†Ô∏è Analysis Failed</h3>
                <p id="error-message" class="error-text"></p>
                <button id="try-again-btn" class="btn btn-secondary">Try Again</button>
            </section>
        </main>

        <footer>
            <p>Built with Whisper, Claude & ElevenLabs ‚Ä¢ <a href="/health" target="_blank">API Status</a></p>
        </footer>
    </div>

    <script src="/static/interview-app.js"></script>
</body>
</html>
